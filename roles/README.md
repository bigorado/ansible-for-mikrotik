## Описание ролей:

1) ```add_ppp_l2tp_user``` - Создание учетки l2tp для подключения к сети через VPN с пк

Использует переменные

```{{ppp_login}}``` - логин учетной записи

```{{ppp_pass}}``` - пароль учетной записи

2) ```add_user``` - добавлят нового пользователя в mikrotik

Использует переменные

```{{new_user_name}}``` - имя пользователя

```{{new_user_pass}}``` - пароль пользователя

```{{group_user}}``` - группу прав пользователя

3) ```change_admin_password``` - изменяет пароль пользователя admin

Использует переменные

```{{new_admin_pass}}``` - новый пароль

```{{old_admin_pass}}``` - старый пароль

```{{new_admin_pass}}``` - подтверждение пароля

4) ```client_setup_l2tp_tun_from_client``` - создает данные l2tp подключения до головного mikrotik клиента, которые будут использоваться на клиенте и маршрут

Использует переменные

```{{l2tp_gateway_to_srv_client}}``` - задает локальный адрес транспортной сети

```{{l2tp_gateway_to_client_client}}``` - задает удаленный адрес транспортной сети

```{{l2tp_user}}``` - задает логин учетной записи

```{{l2tp_pass}}``` - задает пароль учетной записи

```{{network_new}}``` - прописывает подсеть, которая используется на mikrotik клиенте

5) ```client_setup_l2tp_tun_to_srv``` - создает l2tp-client до головного mikrotik

Использует переменные

```{{client_srv}}``` - указывает на какой ip подключаться

```{{l2tp_name_office}}``` - задает имя подключения в interface

```{{l2tp_user}}``` - использует логин учетной записи созданной на головном mikrotik

```{{l2tp_pass}}``` - использует пароль учетной записи созданной на головном mikrotik

```{{networc_server_client}}``` - задает подсеть, которая используется на клиенте mikrotik

```{{l2tp_gateway_to_srv_client}}``` - использует локальный адрес транспортной сети с головного mikrotik

6) ```delete_default_ip``` - удаляет стандартный ip 192.168.88.1, под конец выполнения всегда выдаст ошибку, так как коннект оборвется

7) ```setup_backup_script``` - создает скрипт, который создает backup устройства, устанавливает на него пароль, и делает отправку backup на указанную почту, так же создает расписание на выполнение скрипты и делает первый пробный запуск.

Использует переменные

```{{new_user_name}}``` - берет логин созданного ранее нового пользователя

```{{identity_name}}``` - берет имя устройства заданное при настройке через play-book

```{{pass_backup}}``` - указывает каким паролем защищать backup

```{{mail_to_send}}``` - указывает на какую почту отправлять письмо

```{{sheldure_interval}}``` - устанавливает интервал отправки backup

8) ```setup_bruteforce``` - прописывает правила в firewall с помощью которых ip адрес который в течении 15 минут совершил 3 неудачные попытки входа на mikrotik попадает в черный список

Использует переменные

```{{winbox_blacklist}}``` - интервал на какой период добавлять в черный список

```{{winbox_port}}``` - порт для доступа по winbox

```{{winbox_blacklist_s1}}``` - интервал первой попытки

```{{winbox_blacklist_s2}}``` - интервал второй попытки

```{{winbox_blacklist_s3}}``` - интервал третьей попытки

9) ```setup_cap``` - настройка устройства в режиме CAP

Использует переменные

```{{cap_name}}``` - задает имя устройству

```{{addr_cap_new}}``` - задает ip адрес

```{{network_new}}``` - задает подсеть

```{{wlan_interface}}``` - задает WLAN интерфейсы

```{{ip_office}}``` - добавляет ip адрес основного офиса для доступа извне

```{{ip_rezerv1}}-{{ip_rezerv3}}``` - добавляет резеврные ip, могут быть как сети доступные по VPN так и дополнительные внешние ip

10) ```setup_capsman``` - настройка CAPsMAN на головном устройстве mikrotik

Использует переменные

```{{frequency_2g}}``` - задает частоту для 2g сети

```{{frequency_5g}}``` - задает частоту для 5g сети

```{{tx-power_2g}}```  - задает силу сигнала для 2g сети

```{{tx-power_5g}}```  - задает силу сигнала для 5g сети

```{{wifi_pass}}``` - задает пароль wifi

```{{wifi_name}}``` - задает имя wifi

```{{wlan_interface}}``` - задает WLAN интерфейсы

11) ```setup_ddns``` - включает ddns mikrotik

Использует переменные

```{{ddns_interval}}``` - задает частоту опроса актуальности ip адреса

12) ```setup_email_server``` - настройка smtp для отправки писем

Использует переменные

```{{smtp_login}}``` - задает почту с которой будет идти отправка писем

```{{smtp_port}}``` - задает порт smtp

```{{smtp_server}}``` - задает сервер отправки писем

```{{smtp_pass}}``` - задает пароль от почты

13) ```setup_firewall``` - настройка правил firewall и удаление стандартных правил mikrotik

Использует переменные

```{{winbox_port}}``` - порт для доступа по winbox

```{{ansible_ssh_port}}``` - порт для доступа по ssh

```{{network_new}}``` - задает нужную подсеть

```{{network_mask_fw}}``` - задает нужную маску к подсети

14) ```setup_identity``` - задает имя устройству

Использует переменные

```{{identity_name}}``` - задает имя устройству

15) ```setup_l2tp_server``` - включает l2tp сервер на устройстве и создает profiles для туннелей и VPN подключений

Использует переменные

```{{ipsec_secret}}``` - задает ipsec ключ

```{{address_new}}``` - задает локальный ip адрес в profiles

16) ```setup_l2tp_tun_from_client``` - создает данные l2tp подключения на головном mikrotik, которые будут использоваться на клиенте и маршрут

Использует переменные

```{{l2tp_gateway_to_srv}}``` - задает локальный адрес транспортной сети

```{{l2tp_gateway_to_client}}``` - задает удаленный адрес транспортной сети

```{{l2tp_user}}``` - задает логин учетной записи

```{{l2tp_pass}}``` - задает пароль учетной записи

```{{network_server}}``` - задает подсеть, которая используется на головном mikrotik

```{{l2tp_gateway_to_client}}``` - использует удаленный адрес транспортной сети с головного mikrotik

17) ```setup_l2tp_tun_to_srv``` - создает l2tp-client до головного mikrotik

Использует переменные

```{{l2tp_address}}``` - указывает на какой ip подключаться

```{{l2tp_name}}``` - задает имя подключения в interface

```{{l2tp_user}}``` - использует логин учетной записи созданной на головном mikrotik

```{{l2tp_pass}}``` - использует пароль учетной записи созданной на головном mikrotik

```{{network_new}}``` - задает нужную подсеть

```{{l2tp_gateway_to_srv}}``` - использует локальный адрес транспортной сети с головного mikrotik

18) ```setup_nat``` - настраивает пробросы портов

Использует переменные

```{{grafana_ip}}``` - задает разрешение с определенного ip к доступу на определенный порт

19) ```setup_network``` - настраивает сеть mikrotik

Использует переменные

```{{address_new}}``` - задает нужную подсеть

```{{network_mask_lan}}``` - задает маску локальной сети

```{{pool_range_start}}``` - задает начало пула dhcp

```{{pool_range_end}}``` - задает конец пула dhcp

```{{dns1}}``` - задает первичный dns

```{{dns2}}``` - задает вторичный dns

20) ```setup_notification_telegram``` - настраивает отправку уведомлений в телеграм по принципу ping up/down

Использует переменные

```{{bot_token}}``` - задает token tg бота

```{{id_chat}}``` - задает id группового чата, куда будет писать бот

```{{netwatch_down}}``` - задает то что нужно отправить если хост не доступен

```{{ip_netwatch_host}}``` - задает ip хоста который будем проверять

```{{interval_netwatch}}``` - задает интервал, через сколько повторять проверку

```{{netwatch_up}}``` - задает то что нужно отправить если хост доступен

21) ```setup_pppoe``` - настройка pppoe подключения

Использует переменные

```{{pppoe_name}}``` - задает имя подключения

```{{pppoe_login}}``` - задает логин выданный провайдером

```{{pppoe_pass}}``` - задает пароль выданный провайдером

22) ```setup_services``` - настройка доступа к winbox, ssh, www через services

Использует переменные

```{{ip_office}}``` - добавляет ip адрес основного офиса для доступа извне

```{{ip_rezerv1}}-{{ip_rezerv3}}``` - добавляет резеврные ip, могут быть как сети доступные по VPN так и дополнительные  внешние ip

23) ```setup_wifi``` - настраивает wifi на устройстве

Использует переменные

```{{frequency_2g}}``` - задает частоту для 2g сети

```{{frequency_5g}}``` - задает частоту для 5g сети

```{{wifi_pass}}``` - задает пароль wifi

```{{wifi_name}}``` - задает имя wifi

24) ```upgrade_ros``` - проводит upgrade mikrotik до актуальной версии
